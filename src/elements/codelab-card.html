<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/device-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="codelab-card">

  <template>

    <style include="iron-flex iron-flex-alignment">
      :host {
        display: inline-block;
      }

      paper-card {
        background-color: var(--paper-orange-700);
      }

      .codelab-header { @apply(--paper-font-headline); }
      .codelab-light { color: white; }
      .codelab-duration {
        float: right;
        font-size: 15px;
        vertical-align: middle;
      }

      .star {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
        color: var(--paper-amber-500);
      }
      .star-empty {
        color: var(--paper-grey-500);
      }

      a {
        text-decoration: none;
      }
      .codelab-start-action {
        color: white;
      }
    </style>

    <paper-card>
      <div class="card-content">
        <div class="category">[[theme]]</div>
        <div class="codelab-header">[[title]]
          <div class="codelab-duration codelab-light">
            <iron-icon icon="device:access-time"></iron-icon>
            <span>[[duration]]min</span>
          </div>
        </div>
        <p class="codelab-light">[[summary]]</p>
        <div>
          <template is="dom-repeat" items="[[_computeFullStars(difficulty)]]">
            <iron-icon class="star" icon="star"></iron-icon>
          </template>
          <template is="dom-repeat" items="[[_computeEmptyStars(difficulty)]]">
            <iron-icon class="star star-empty" icon="star"></iron-icon>
          </template>
        </div>
      </div>
      <div class="card-actions horizontal end-justified layout">
        <a href="/codelabs/[[url]]" tabindex="-1">
          <paper-button class="codelab-start-action" raised>Start this codelab</paper-button>
        </a>
      </div>
    </paper-card>

  </template>

  <script>

    Polymer({

      is: 'codelab-card',

      MAX_DIFFICULTY: 5,

      properties: {
        title: String,
        summary: String,
        theme: String,
        difficulty: Number,
        duration: Number,
        tags: Array,
        updated: String,
        url: String,
      },

      _computeFullStars: function(count) {
        return new Array(count);
      },

      _computeEmptyStars: function(count) {
        return new Array(this.MAX_DIFFICULTY - count);
      },

    });

  </script>

</dom-module>
